# Question 2

**a) Using the technique you are familiar with:**

**i) Normalise this form to Third Normal Form (3NF) Show each of the stages of normalisation.**

The following attributes can be identified in the form about diving club members, their activities and equipments:

- Member information: Member Number, Member Name, Membership Type Code, Membership Type Name
- Activity information: Activity ID, Activity Name, Date, Price
- Equipment Information: Equipment Code, Equipment Name


**Step 1: First Normal Form (1NF)**
We define 1NF as a relation in which the intersection of each row and column contains one and only one value

**Requirements**:
- Eliminate repeating groups
- Ensure all attributes contain atomic values
- Identify a primary key


**Problems identified in the initial form**:
- Repeating groups of equipment for each activity
- Member information is mixed with activity information
- Composite attributes as seen in Activity ID with multiple equipment entries


**Solution**:
There are two common approaches to removing repeating groups from unnormalized tables.
- By entering appropriate data in the empty columns of rows containing the repeating data.
- By placing the repeating data, along with a copy of the original key attribute(s), in a
separate relation.

In this case we'll go with the second option and separate the data into distinct tables; Member, Activity and Equipment with atomic values. 

**Our New Tables:**

**Member:**
| Member Number | Member Name | Membership Type Code | Membership Type Name |
|---------------|-------------|-----------------------|-----------------------|
| 98765         | Harrison Smith | FT                  | Full Time            |

**Activity:**
| Activity ID | Activity Name | Date     | Price |
|------------|---------------|----------|-------|
| 099        | Standard Diving | 01/08/20 | £300  |
| 0100       | Standard Diving | 01/08/20 | £300  |
| 0101       | Basic Underwater Archaeology | 03/08/20 | £375  |
| 098        | Advanced Underwater Archaeology | 06/09/20 | £399  |
| 078        | Industrial Diving Course | 08/09/20 | £399  |

**Equipment:**
| Equipment Code | Equipment Name |
|----------------|----------------|
| ST             | Standard Tanks |
| SN             | Snorkel        |
| DS             | Diving Suit    |
| WA             | Watch          |
| ET             | Extended Tanks |
| DX             | Dulux Diving Suit |
| AT             | Archaeological tools |
| IT             | Industrial Kit |

**Activity Equipment:**
| Activity ID | Equipment Code |
|------------|----------------|
| 099        | ST             |
| 099        | SN             |
| 099        | DS             |
| 099        | WA             |
| 0100        | ST             |
| 0100        | SN             |
| 0100        | DS             |
| 0100        | WA             |
| 0101        | ST             |
| 0101        | SN             |
| 0101        | DS             |
| 0101        | WA             |
| 098        | ET             |
| 098        | DX             |
| 098        | AT             |
| 078        | ET             |
| 078        | DX            |
| 078        | IT             |



**Step 2: Second Normal Form (2NF)**
We define a 2NF as a relation that is in first normal form and every non-primary-key. attribute is fully functionally dependent on the primary key. That is, we remove partial dependency.

**Requirements**:
- Must be in 1NF
- Remove partial dependencies (all non-key attributes must depend on the entire primary key)


**In the tables above:**
- In the Member table, all attributes depend on the full primary key (Member Number)
- In the Activity table, all attributes depend on Activity ID
- In Equipment table, all attributes depend on Equipment Code
- Activity Equipment table has a composite key (Activity ID, Equipment Code) with no non-key attributes
- Member Activity table has a composite key (Member Number, Activity ID) with no non-key attributes.

Therefore all tables are already in 2NF.

**Step 3: Third Normal Form (3NF)**
We define a 3NF as a relation that is in first and second normal form and in which no non-primary-key attribute is transitively dependent on the primary key.

**Requirements**:
- Must be in 2NF
- Remove transitive dependencies (non-key attributes must depend only on the primary key)


**In the our tables:**
- In the Member table, Membership Type Name depends on Membership Type Code (not directly on Member Number)
- All other tables are okay since they do not have any transitive dependencies

**Solution:** 
We'll remove the transitive dependency in Member table by splitting it into two. i.e Member and Member Type tables

**Our final tables:**

**Member:**
| Member_Number | Member_Name | Membership_Type_Code |
|---------------|-------------|-----------------------|
| 98765         | Harrison Smith | FT                  |

**Membership Type:**
| Membership Type Code | Membership Type Name |
|-----------------------|-----------------------|
| FT                  | Full Time            |

**Activity:**
| Activity ID | Activity Name | Date     | Price |
|------------|---------------|----------|-------|
| 099        | Standard Diving | 01/08/20 | £300  |
| 0100       | Standard Diving | 01/08/20 | £300  |
| 0101       | Basic Underwater Archaeology | 03/08/20 | £375  |
| 098        | Advanced Underwater Archaeology | 06/09/20 | £399  |
| 078        | Industrial Diving Course | 08/09/20 | £399  |

**Equipment:**
| Equipment Code | Equipment Name |
|----------------|----------------|
| ST             | Standard Tanks |
| SN             | Snorkel        |
| DS             | Diving Suit    |
| WA             | Watch          |
| ET             | Extended Tanks |
| DX             | Dulux Diving Suit |
| AT             | Archaeological tools |
| IT             | Industrial Kit |

**Activity Equipment:**
| Activity ID | Equipment Code |
|------------|----------------|
| 099        | ST             |
| 099        | SN             |
| 099        | DS             |
| 099        | WA             |
| 0100        | ST             |
| 0100        | SN             |
| 0100        | DS             |
| 0100        | WA             |
| 0101        | ST             |
| 0101        | SN             |
| 0101        | DS             |
| 0101        | WA             |
| 098        | ET             |
| 098        | DX             |
| 098        | AT             |
| 078        | ET             |
| 078        | DX            |
| 078        | IT             |

**Member Activity:**
| Member Number | Activity ID |
|---------------|------------|
| 98765         | 099        |
| 98765         | 0100       |
| 98765         | 0101       |
| 98765         | 098        |
| 98765         | 078        |

### ii) List the resulting entities

1. **Member**
   - Member Number (PK)
   - Member Name
   - Membership Type Code (FK to Membership Type)

2. **Membership_Type**
   - Membership Type Code (PK)
   - Membership Type Name

3. **Activity**
   - Activity ID (PK)
   - Activity Name
   - Date
   - Price

4. **Equipment**
   - Equipment Code (PK)
   - Equipment Name

5. **Activity Equipment**
   - Activity ID (PK, FK to Activity)
   - Equipment Code (PK, FK to Equipment)

6. **Member Activity**
   - Member Number (PK, FK to Member)
   - Activity ID (PK, FK to Activity)

## b) With the use of an example discuss how fourth normal form (4NF) can be used to normalise a relation
A relation is in 4NF if and only if for every nontrivial multi-valued dependency A ->> B, A is a candidate key of the relation

A Multi-Valued Dependency as a dependency between attributes (for example, A, B, and C) in a relation, such that for each value of A there is a set of values for B and a set of values for C. However, the set of values for B and C are independent of each other.
A—>> B
A—>> C

For example the table below is not in 4NF:

| **Course D** | **Equipment** | **Lecturer** |
|--------------|--------------|----------------|
| BCOM1         | Projector    | Kelvin      |
| BCOM1         | Whiteboard   | Kelvin      |
| BCOM1         | Projector    | Odhiambo     |
| BCOM1         | Whiteboard   | Odhiambo      |

The problem we have here is Multi-Valued Dependencies: 
Course ID ->>Equipment
Course ID ->> Lecturer

Equipment and Lecturer are independent that is, a course can have multiple equipment and multiple Lecturers, but they don’t depend on each other.

Although our table is already in BCNF since it does not have functional dependencies, it has MVDs

We can therefore normalize this table further using 4NF by breaking the relation into two tables:

1. **Course Equipment**  
   | **Course ID** | **Equipment** |
   |--------------|--------------|
   | BCOM1         | Projector    |
   | BCOM1         | Whiteboard   |

2. **Course Lecturer**  
   | **Course_ID** | **Lecturer** |
   |--------------|----------------|
   | BCOM1         | Kelvin     |
   | BCOM1         | Odhiambo      |

By doing so, we can now see that both tables are in BCNF and 4NF

This is how 4NF can be used to normalise a relation.